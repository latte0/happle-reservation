# AWS SES 送信制限解除申請 - 返信メール

## 件名
Re: Amazon SES の使用計画について

## 本文

平素よりお世話になっております。

この度は、Amazon SES の送信制限解除申請についてご連絡いただき、ありがとうございます。
以下、ご要望いただいた情報についてご回答いたします。

---

## 1. メール送信の頻度について

当システムは、オンライン予約システム（Happle Reservation System）で、予約が完了した際にのみ、顧客に予約確認メールを送信するトランザクションメールサービスです。

- **送信タイミング**: 顧客が予約を完了した際に1通のみ送信
- **送信頻度**: 予約件数に応じて変動（1日あたり数件〜数十件程度を想定）
- **送信パターン**: リアルタイム送信（予約完了と同時に送信）
- **送信先**: 予約時に顧客が入力したメールアドレス（1件の予約につき1通）

---

## 2. 受信者リストのメンテナンス方法について

- **オプトイン方式**: 予約フォームで顧客が自らメールアドレスを入力し、予約を完了することで送信許可を得ています
- **リスト管理**: 固定のメールリストは使用せず、各予約時に動的に送信先を決定します
- **重複送信の防止**: 同一予約に対しては1通のみ送信する仕組みを実装しています
- **メールアドレスの検証**: 予約フォームでメールアドレスの形式検証を実施しています

---

## 3. バウンス、申し立て、解除申請の管理方法について

現在、以下の管理方法を実装・運用しています：

### バウンス管理
- AWS SESのバウンス通知をSNS経由で受信する仕組みを実装予定です
- バウンスが発生したメールアドレスは、今後の送信対象から除外する予定です
- バウンス率を監視し、一定の閾値を超えた場合は送信を一時停止する仕組みを実装予定です

### 申し立て（Complaint）管理
- AWS SESの申し立て通知をSNS経由で受信する仕組みを実装予定です
- 申し立てが発生したメールアドレスは即座に送信対象から除外します
- 申し立て率を監視し、一定の閾値を超えた場合は送信を一時停止する仕組みを実装予定です

### 解除申請（Unsubscribe）管理
- メール本文に解除リンクを含める予定です（現在は予約確認メールのみのため、解除機能は不要と判断しています）
- 解除リクエストがあった場合は、該当メールアドレスを送信対象から除外します

### 監視とログ
- すべてのメール送信結果をログファイルに記録しています
- Slack通知により、メール送信の成功/失敗をリアルタイムで監視しています
- 定期的にバウンス率・申し立て率を確認し、問題があれば対応します

---

## 4. 送信するメールのサンプル

以下、実際に送信している予約確認メールのサンプルです：

```
件名: 【予約確認】Test Studio (Happle) - 2025-12-27(Sat) 14:00

メールテスト　様

この度は「Test Studio (Happle)」にご予約いただき誠にありがとうございます。
今回のご予約内容は以下のとおりです。

----------------------------------

■予約日時
2025-12-27(Sat) 14:00

■お客様名
メールテスト

■店舗名
Test Studio (Happle)

■施術コース
Program Test 

■所要時間
30分

■電話番号
09012345678

■予約確認URL
/reservation-detail?reservation_id=1239&member_id=96&verify=650a4118e4c84277

【当日の注意事項について】
 ・持病がある方に関しては施術によっては医師の同意書が必要になります。
・妊娠中の方の施術はお断りさせていただいております。
・未成年の方は親権者同伴以外の場合、施術不可となります。
・生理中でも施術は可能です。
・お支払いはクレジットカードのみとなります。(カード番号が必要になります)
・初回お試しは全店舗を通して、お一人様一回までとなっております。2回目のご利用の方は通常料金でのご案内となります。

【キャンセルについて】
◆キャンセルはご予約日の前日18時までにご連絡くださいませ。
◆無断キャンセルの場合は正規の施術代をご負担いただきます。また、次回よりご予約がお取りいただけなくなる場合がございます。
◆前日18時以降のキャンセルやご変更は直前キャンセル料2200円を銀行振り込みにてご請求させていただきます。

お願いばかりで申し訳ございませんが、一部ルールをお守りいただけない方がいらっしゃいますので予めご了承くださいませ。

当日お会いできるのを楽しみにしております。

=============================
■Test Studio (Happle)
=============================
```

### メールの特徴
- **トランザクションメール**: 予約完了の確認通知のみ
- **高品質なコンテンツ**: 予約情報の確認と、店舗からの重要な注意事項を記載
- **日本語対応**: 日本語の文字コード（UTF-8）を使用
- **個人情報の保護**: 予約情報のみを記載し、不要な情報は含めません

---

## 5. その他の情報

### 使用するAmazon SES ID
- **送信元メールアドレス**: `noreply@reserve-now.jp`
- **送信元ドメイン**: `reserve-now.jp`（ドメイン検証を実施予定）

### 技術的な実装
- **送信方法**: AWS SES API（boto3）を使用
- **リージョン**: ap-northeast-1（東京）
- **エラーハンドリング**: 送信失敗時はログに記録し、Slackに通知

### コンプライアンス
- **個人情報保護**: 顧客のメールアドレスは予約情報として適切に管理
- **スパム対策**: 予約完了時のみ送信し、マーケティングメールは送信しません
- **顧客同意**: 予約フォームで顧客が自らメールアドレスを入力することで送信同意を得ています

---

以上、ご要望いただいた情報についてご回答いたします。
ご不明な点がございましたら、お気軽にお問い合わせください。

どうぞよろしくお願いいたします。

---

[お客様名]
[会社名/組織名]
[連絡先メールアドレス]

